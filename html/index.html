<!DOCTYPE html>
<html>
	<head>
	<meta charset="UTF-8" />
		<title>hueveras de carton 2</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.87.0/phaser.min.js"></script>
	  <script>
		let canvas_w=800;
		let canvas_h=450;
		
		let config = {width: 800,
		height:450,
		scene: {
		preload: precarga,
		create: crea, 
		update: actualiza
		}
	};
	  
let game = new Phaser.Game(config);

let colores = [0xffffff, 0x8B4513, 0xFFD700]; // Blanco, marron y dorado

function precarga ()
{
	console.log("cargando imagenes...");
	this.load.image('huevera', '/imgs/huevera.png');
	this.load.image('huevo', '/imgs/huevo.png');
	this.load.image('fondo', '/imgs/fondo.jpg');
    this.load.image('fondo_hueveras', '/imgs/fondo_hueveras.jpg');
}

function crea () 
{
	// Fondo principal
		console.log("creando escena...");
    let fondo = this.add.image(canvas_w / 2, canvas_h / 2, 'fondo').setDisplaySize(canvas_w, canvas_h);
    
    // Fondo de la columna izquierda
    let columna = this.add.image(150, canvas_h / 2, 'fondo_hueveras');
    columna.setDisplaySize(300, canvas_h);

    // Posicionar hueveras en columna
     let huevera1 = this.add.image(150, 100, 'huevera').setScale(0.5).setTint(colores[0]);
		 let huevera2 = this.add.image(150, 220, 'huevera').setScale(0.5).setTint(colores[1]);
		 let huevera3 = this.add.image(150, 340, 'huevera').setScale(0.5).setTint(colores[2]);

		console.log("hueveras posicionadas");

    // Posicionar huevos en fila y detectar clics
    let huevo1 = this.add.image(500,300,'huevo').setScale(0.5).setTint(colores[0]).setInteractive();

    let huevo2 = this.add.image(620,300,'huevo').setScale(0.5).setTint(colores[1]).setInteractive();
    

		let huevo3 = this.add.image(740,300,'huevo').setScale(0.5).setTint(colores[2]).setInteractive();

		this.input.setDraggable(huevo1);
		this.input.setDraggable(huevo2);
		this.input.setDraggable(huevo3);

		console.log("huevos posicionados");

//arrastre
		huevo1.on('pointerdown', function () {
		console.log('Arrastrando');

		//huevo_shadow.x = this.x + 8;
		//huevo_shadow.y = this.y + 8;

		this.setScale(1);
		});

this.input.on('drag', function (pointer,object, x, y) {
object.x = x;
object.y = y;
//huevo_shadow.x = x + 8;
//huevo_shadow.y = y + 8;
if (Phaser.Geom.Intersects.RectangleToRectangle(huevera1.getBounds(), object.getBounds())){
	console.log("Huevo dentro de huevera");	
}
});

this.input.on('dragend', function (pointer, obj) {
console.log("Soltado: ", obj);
this.setScale(0.5);
});

}

function actualiza (){}
		</script>
	</head>
	<body>
	</body>
</html>

